<div class="notes-container">
  <div class="header">
    <h2>–í—Å—ñ –Ω–æ—Ç–∞—Ç–∫–∏ ({{getNotesCount()}})</h2>
    <div class="header-buttons">
      <button routerLink="/add-note" class="btn btn-primary">–î–æ–¥–∞—Ç–∏ –Ω–æ—Ç–∞—Ç–∫—É</button>
    </div>
  </div>

  <!-- –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è -->
  <div class="control-panel">
    <div class="backup-section">
      <h3>üíæ –†–µ–∑–µ—Ä–≤–Ω—ñ –∫–æ–ø—ñ—ó</h3>
      <div class="backup-buttons">
        <button (click)="exportNotes()" class="btn btn-success" [disabled]="getNotesCount() === 0">
          üì• –°–∫–∞—á–∞—Ç–∏ backup
        </button>

        <label for="file-input" class="btn btn-warning file-label">
          üì§ –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ backup
        </label>
        <input
          id="file-input"
          type="file"
          accept=".json"
          (change)="onFileSelected($event)"
          style="display: none;">

        <button (click)="clearAllNotes()" class="btn btn-danger" [disabled]="getNotesCount() === 0">
          üóëÔ∏è –í–∏–¥–∞–ª–∏—Ç–∏ –≤—Å–µ
        </button>
      </div>
    </div>
  </div>

  <div *ngIf="(notes$ | async)?.length === 0" class="no-notes">
    <p>–ü–æ–∫–∏ —â–æ –Ω–µ–º–∞—î –∂–æ–¥–Ω–æ—ó –Ω–æ—Ç–∞—Ç–∫–∏. –ë—É–¥—å—Ç–µ –ø–µ—Ä—à–∏–º!</p>
    <button routerLink="/add-note" class="btn btn-primary">–°—Ç–≤–æ—Ä–∏—Ç–∏ –ø–µ—Ä—à—É –Ω–æ—Ç–∞—Ç–∫—É</button>
  </div>

  <div class="notes-grid">
    <div *ngFor="let note of notes$ | async" class="note-card">
      <div class="note-header">
        <h3 class="note-title">{{note.title}}</h3>
        <button (click)="deleteNote(note.id)" class="btn btn-danger btn-sm">–í–∏–¥–∞–ª–∏—Ç–∏</button>
      </div>

      <div class="note-meta">
        <span class="author">–ê–≤—Ç–æ—Ä: {{note.author}}</span>
        <span class="date">{{formatDate(note.createdAt)}}</span>
      </div>

      <div class="note-content">
        <p>{{note.content}}</p>
      </div>
    </div>
  </div>
</div>
